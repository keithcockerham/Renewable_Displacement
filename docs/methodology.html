<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Methodology | Renewable Displacement Analysis</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>Renewable Displacement Analysis</h1>
            </div>
            <ul class="nav-links">
                <li><a href="index.html">Overview</a></li>
                <li><a href="methodology.html" class="active">Methodology</a></li>
                <li><a href="results.html">Results</a></li>
                <li><a href="https://github.com/keithcockerham/Renewable_Displacement" target="_blank">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="container hero-content">
            <h2>How I Measured Renewable Displacement</h2>
            <p class="subtitle">
                From a 1.36 GB raw EIA text dump to cleaned, differenced time series and displacement tests.
            </p>
        </div>
    </section>

    <!-- Project Framing -->
    <section class="overview">
        <div class="container">
            <h2>Framing the Question</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <h3>Core Question</h3>
                    <p>
                        Do increases in utility-scale solar and wind generation actually displace fossil fuel
                        generation in U.S. grid data, or are we just seeing coincident trends driven by policy,
                        prices, and demand?
                    </p>
                    <p>
                        The goal was not to “prove causality” in a strict econometric sense, but to test whether
                        the data support a plausible displacement story once trends and seasonality are removed.
                    </p>
                </div>

                <div class="overview-card">
                    <h3>Working Hypothesis</h3>
                    <p>
                        Because natural gas plants are flexible and dispatchable, they should be the first fuel
                        displaced by variable renewables. Coal, which is slower and more baseload-oriented, should
                        show less short-run displacement, even though it has declined structurally over time.
                    </p>
                </div>

                <div class="overview-card">
                    <h3>Key Constraints</h3>
                    <ul style="margin-top: 0.5rem; line-height: 1.7;">
                        <li>Single large text file (~1.36 GB) of EIA series</li>
                        <li>JSON-like rows with heterogeneous metadata</li>
                        <li>Mix of monthly, quarterly, and annual frequencies</li>
                        <li>National scope only for this phase (no state-level panel yet)</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Data Engineering -->
    <section class="technical">
        <div class="container">
            <h2>Data Engineering</h2>

            <div class="tech-grid">
                <div class="tech-card">
                    <h3>Raw Input Format</h3>
                    <ul>
                        <li>Source: EIA electricity dataset exported as a large text file</li>
                        <li>Each line: JSON-like dictionary with fields such as
                            <code>series_id</code>, <code>name</code>, <code>units</code>, <code>f</code>,
                            <code>geoset_id</code>, and <code>data</code>.
                        </li>
                        <li><code>data</code> is a list of <code>[period, value]</code> pairs (e.g., <code>["202501", 0.357]</code>).</li>
                        <li>Over 751,000 individual series in the raw file.</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h3>Parsing & Flattening</h3>
                    <ul>
                        <li>Read file line-by-line to avoid loading everything into memory at once.</li>
                        <li>Parsed each JSON-like record into a Python dictionary.</li>
                        <li>Dropped rows with no <code>start</code>, <code>end</code>, or <code>data</code> (empty series).</li>
                        <li>Exploded the <code>data</code> list into a long, row-wise format:
                            one row per <code>(series_id, period)</code> with a numeric <code>value</code>.
                        </li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h3>Filtering to Relevant Series</h3>
                    <ul>
                        <li>Focused on generation series whose <code>geoset_id</code> begins with <code>ELEC.GEN</code>.</li>
                        <li>Selected four main fuel types:
                            <code>SUN</code> (solar), <code>WND</code> (wind),
                            <code>NG</code> (natural gas), and <code>COW</code> (coal).
                        </li>
                        <li>Restricted to national-level series (geography “USA” / national aggregates).</li>
                        <li>Converted <code>period</code> strings (e.g., <code>202501</code>) to monthly datetimes.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Time Series Construction -->
    <section class="technical">
        <div class="container">
            <h2>Building the Time Series</h2>

            <div class="tech-grid">
                <div class="tech-card">
                    <h3>Monthly Alignment</h3>
                    <ul>
                        <li>Pivoted the long table to a monthly index with one column per fuel:
                            <code>SUN</code>, <code>WND</code>, <code>NG</code>, <code>COW</code>.
                        </li>
                        <li>Handled mixed frequencies by focusing on monthly observations and discarding quarterly / annual aggregates for this phase.</li>
                        <li>Used the intersection of months with non-missing values across the chosen fuels.</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h3>Renewable Aggregate</h3>
                    <ul>
                        <li>Defined a combined renewable series:
                            <code>renew = SUN + WND</code>.
                        </li>
                        <li>This simplifies the displacement story to “all utility-scale variable renewables” vs fossil fuels.</li>
                        <li>Coal and gas were kept separate to test whether they respond differently.</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h3>Stationarity & Differencing</h3>
                    <ul>
                        <li>Long-run trends in both renewables and fossil fuels make level regressions misleading.</li>
                        <li>To avoid spurious correlation, all series were first-differenced:
                            <code>Δvalue_t = value_t − value_{t-1}</code>.
                        </li>
                        <li>This focuses the analysis on <em>month-to-month changes</em> rather than long-run growth.</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Statistical Tests -->
    <section class="technical">
        <div class="container">
            <h2>Statistical Methods</h2>

            <div class="tech-grid">
                <div class="tech-card">
                    <h3>1. Conditional Regression</h3>
                    <p>
                        The first test asks: when renewables change, do fossil fuels move in the opposite direction,
                        even after controlling for overall system movement?
                    </p>
                    <ul>
                        <li>Core model:
                            <code>Δgas_t = α + β·Δrenew_t + ε_t</code>
                        </li>
                        <li>Negative, significant β → evidence of short-run displacement of gas.</li>
                        <li>The same structure was tested with coal as the dependent variable.</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h3>2. Granger Causality</h3>
                    <p>
                        Granger causality doesn’t prove true causation, but it tests whether knowing the history of one
                        variable improves forecasts of another.
                    </p>
                    <ul>
                        <li>Tested 12 monthly lags for:
                            <ul style="margin-top: 0.25rem;">
                                <li><code>renew → gas</code></li>
                                <li><code>gas → renew</code></li>
                                <li><code>renew → coal</code></li>
                                <li><code>coal → renew</code></li>
                            </ul>
                        </li>
                        <li>Focus is on patterns across lags, not a single p-value.</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h3>3. Visual Correlations & Rolling Windows</h3>
                    <p>
                        To complement the formal tests, rolling correlations (e.g., 24-month windows) were used to
                        visualize how the relationship between renewables and gas/coal evolved over time.
                    </p>
                    <ul>
                        <li>Helps show when displacement signals become stronger (e.g., post-2014 solar build-out).</li>
                        <li>Also makes seasonal patterns visible (e.g., coal rising in winter as solar falls).</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Limitations -->
    <section class="overview">
        <div class="container">
            <h2>Limitations & Next Steps</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <h3>National Aggregation</h3>
                    <p>
                        This phase uses national-level totals only. Regional dynamics (e.g., ERCOT vs CAISO) can be very different
                        and may show stronger or weaker displacement patterns.
                    </p>
                </div>
                <div class="overview-card">
                    <h3>Other Fuels & Storage</h3>
                    <p>
                        Hydro, nuclear, and battery storage are present in the EIA dataset but were not included in the
                        initial displacement model. These could be important mediating factors in future work.
                    </p>
                </div>
                <div class="overview-card">
                    <h3>Model Scope</h3>
                    <p>
                        The models focus on short-run monthly changes. Structural drivers like fuel prices, policy shifts,
                        and plant retirements are not explicitly modeled, only indirectly reflected in the time series.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>2025 Keith | Renewable Displacement Analysis | <a href="https://github.com/keithcockerham/Renewable_Displacement" target="_blank">GitHub</a></p>
        </div>
    </footer>
</body>
</html>